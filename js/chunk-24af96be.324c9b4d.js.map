{"version":3,"sources":["webpack:///./src/images/icon-smile.png","webpack:///./src/components/ChatFooter.vue?eb70","webpack:///src/components/ChatFooter.vue","webpack:///./src/components/ChatFooter.vue?f3cc","webpack:///./src/components/ChatFooter.vue","webpack:///./src/images/icon-upload-img.png","webpack:///./src/images/icon-send.png","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/ChatFooter.vue?367e"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","class","attrs","on","$event","$refs","uploadImg","click","ref","staticStyle","onFileChange","isSticker","_l","num","key","id","sendSticker","directives","name","rawName","value","expression","modifiers","domProps","type","indexOf","_k","keyCode","sendMessage","target","composing","message","trim","$forceUpdate","staticRenderFns","props","userName","String","data","methods","e","shiftKey","length","preventDefault","messageRef","push","timeStamp","Date","url","self","file","files","$emit","progress","isUpload","storageRef","console","log","error","snapshot","getDownloadURL","then","downloadURL","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match"],"mappings":"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","file":"js/chunk-24af96be.324c9b4d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/icon-smile.f2ae1532.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-footer\"},[_c('footer',{staticClass:\"footer\"},[_c('div',{staticClass:\"content\"},[_c('nav',{staticClass:\"level is-mobile\"},[_c('div',{staticClass:\"level-left\"},[_c('img',{staticClass:\"level-item icon-uploadImg\",class:{ },attrs:{\"src\":require(\"@/images/icon-upload-img.png\")},on:{\"click\":function($event){return _vm.$refs.uploadImg.click()}}}),_c('input',{ref:\"uploadImg\",staticClass:\"uploadInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/jpeg,image/jpg,image/png\"},on:{\"change\":function($event){return _vm.onFileChange( $event )}}}),_c('div',{staticClass:\"dropdown is-up\",class:{'is-active': _vm.isSticker}},[_c('div',{staticClass:\"dropdown-trigger\",on:{\"click\":function($event){_vm.isSticker = !_vm.isSticker},\"blur\":function($event){_vm.isSticker = false}}},[_c('img',{staticClass:\"level-item icon-sticker\",attrs:{\"src\":require(\"@/images/icon-smile.png\"),\"aria-haspopup\":\"true\",\"aria-controls\":\"dropdown-menu\"}})]),_c('div',{staticClass:\"dropdown-menu\",attrs:{\"id\":\"dropdown-menu\",\"role\":\"menu\"}},[_c('div',{staticClass:\"dropdown-content\"},[_c('div',{staticClass:\"columns is-mobile is-multiline\"},_vm._l((9),function(num){return _c('div',{key:num.id,staticClass:\"column is-one-third-desktop is-half-mobile\"},[_c('img',{staticClass:\"dropdown-item sticker-item\",attrs:{\"src\":'./img/sticker-'+ num + '.png'},on:{\"click\":function($event){return _vm.sendSticker(num)}}})])}),0)])])])]),_c('div',{staticClass:\"level-item user-message\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.message),expression:\"message\",modifiers:{\"trim\":true}}],staticClass:\"textarea\",attrs:{\"rows\":\"1\"},domProps:{\"value\":(_vm.message)},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"level-right\"},[_c('img',{staticClass:\"level-item icon-submit\",attrs:{\"src\":require(\"@/images/icon-send.png\")},on:{\"click\":function($event){return _vm.sendMessage($event)}}})])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chat-footer\">\n    <footer class=\"footer\">\n      <div class=\"content\">\n        <nav class=\"level is-mobile\">\n          <div class=\"level-left\">\n            <img class=\"level-item icon-uploadImg\" src=\"@/images/icon-upload-img.png\" @click=\"$refs.uploadImg.click()\" :class=\"{ }\"/>\n            <input class=\"uploadInput\" style=\"display: none\" type=\"file\" ref=\"uploadImg\" @change=\"onFileChange( $event )\" accept=\"image/jpeg,image/jpg,image/png\" >\n            \n            <div class=\"dropdown is-up\" :class=\"{'is-active': isSticker}\">\n              <div class=\"dropdown-trigger\" @click=\"isSticker = !isSticker\" @blur=\"isSticker = false\">\n                <img class=\"level-item icon-sticker\" src=\"@/images/icon-smile.png\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu\"/>\n              </div>\n              <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n                <div class=\"dropdown-content\">\n                  <div class=\"columns is-mobile is-multiline\">\n                    <div v-for=\"num in 9\" :key=\"num.id\" class=\"column is-one-third-desktop is-half-mobile\">\n                      <img :src=\"'./img/sticker-'+ num + '.png'\" class=\"dropdown-item sticker-item\" @click=\"sendSticker(num)\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"level-item user-message\">\n            <textarea class=\"textarea\" v-model.trim=\"message\" @keypress.enter=\"sendMessage($event)\" rows=\"1\"></textarea>\n          </div>\n\n          <div class=\"level-right\">\n            <img class=\"level-item icon-submit\" src=\"@/images/icon-send.png\" @click=\"sendMessage($event)\"/>\n          </div>\n        </nav>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport firebaseObj from '@/middleware/firebaseHelper.js';\nconst messageRef = firebaseObj.database.ref('/message/');\n\nexport default {\n  name: 'ChatFooter',\n  props: {\n    userName: String\n  },\n  data: () => ({\n    message: '',\n    isSticker: false,\n    file: ''\n  }),\n  methods: {\n    sendMessage(e) {\n      if (e.shiftKey || e.keyCode === 229) {\n        return false;\n      }\n      if (this.message.length <= 1 && this.message.trim() == '') {\n        e.preventDefault();\n        return false;\n      }\n      messageRef.push({\n        userName: this.userName,\n        type: 'text',\n        message: this.message,\n        timeStamp: new Date()\n      })\n\n      this.message = '';\n      e.preventDefault();\n    },\n    sendSticker(stickerId) {\n      messageRef.push({\n        userName: this.userName,\n        type: 'sticker',\n        url: './img/sticker-'+ stickerId + '.png',\n        timeStamp: new Date()\n      });\n      this.isSticker = false;\n    },\n    onFileChange (e) {\n      let self = this;\n      self.file = e.target.files[0];\n      self.$emit('updateUpload', {\n        progress: 0,\n        isUpload: true\n      });\n      let storageRef = firebaseObj.storage.ref(new Date().getTime() + self.file.name).put(self.file);\n      storageRef.on('state_changed', (snapshot) => {\n        self.$emit('updateUpload', {\n          progress: (snapshot.bytesTransferred / snapshot.totalBytes) * 100,\n          isUpload: true\n        });\n      }, (error) => {\n        console.log(error);\n      }, () => {\n        storageRef.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n          console.log('File available at', downloadURL);\n          messageRef.push({\n            userName: self.userName,\n            type: 'image',\n            url: downloadURL,\n            timeStamp: new Date()\n          })\n          self.$emit('updateUpload', {\n            progress: 100,\n            isUpload: false,\n          });\n        });\n      });\n    }\n  },\n}\n</script>\n\n<style lang=\"sass\" scoped>\n  .chat-footer\n    .footer\n      padding: 0 1em\n      .dropdown-menu\n        min-width: 560px\n        .dropdown-content\n          height: 50vh\n          overflow-x: hidden\n          overflow-y: scroll\n        .sticker-item\n          width: 150px\n      .user-message\n        padding: 1em\n        .textarea\n          resize: none\n      .icon-uploadImg,\n      .icon-sticker,\n      .icon-submit\n        width: 30px\n@media (max-width: 768px)\n  .chat-footer\n    .footer\n      .dropdown-menu\n        min-width: 90vw\n        left: -40px\n        margin-bottom: 22px\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatFooter.vue?vue&type=template&id=b3d394fe&scoped=true&\"\nimport script from \"./ChatFooter.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatFooter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatFooter.vue?vue&type=style&index=0&id=b3d394fe&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3d394fe\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/icon-upload-img.bc7e8122.png\";","module.exports = __webpack_public_path__ + \"img/icon-send.1c619b45.png\";","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=style&index=0&id=b3d394fe&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=style&index=0&id=b3d394fe&lang=sass&scoped=true&\""],"sourceRoot":""}